"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[4461],{203(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});var s=r(4613),i=r(2540),a=r(3023);const l={sidebar_position:3},t="Lab: Creating a Simple Publisher/Subscriber",c={authorsImageUrls:[]},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup",id:"setup",level:2},{value:"1. Create the Publisher Node",id:"1-create-the-publisher-node",level:2},{value:"2. Create the Subscriber Node",id:"2-create-the-subscriber-node",level:2},{value:"3. Update <code>setup.py</code>",id:"3-update-setuppy",level:2},{value:"4. Build and Run",id:"4-build-and-run",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:'This lab will guide you through creating your first ROS 2 nodes in Python. You will create two nodes: one that publishes a "hello world" message to a topic, and another that subscribes to that topic and prints the received messages.'}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A working ROS 2 installation (e.g., Foxy, Galactic, Humble)."}),"\n",(0,i.jsx)(n.li,{children:"Basic familiarity with Python programming."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create a ROS 2 Workspace"}),": If you don't have one, create a new ROS 2 workspace."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\r\ncd ~/ros2_ws/src\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Create a Python Package"}),": Create a new Python package named ",(0,i.jsx)(n.code,{children:"my_ros2_package"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_ros2_package\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Navigate to the Package Directory"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd my_ros2_package\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"1-create-the-publisher-node",children:"1. Create the Publisher Node"}),"\n",(0,i.jsxs)(n.p,{children:["Create a new file named ",(0,i.jsx)(n.code,{children:"minimal_publisher.py"})," in ",(0,i.jsx)(n.code,{children:"~/ros2_ws/src/my_ros2_package/my_ros2_package/"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalPublisher(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('minimal_publisher')\r\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = 'Hello ROS 2 World: %d' % self.i\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    minimal_publisher = MinimalPublisher()\r\n\r\n    rclpy.spin(minimal_publisher)\r\n\r\n    # Destroy the node explicitly\r\n    # (optional - otherwise it will be done automatically\r\n    # when the garbage collector destroys the node object)\r\n    minimal_publisher.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(n.h2,{id:"2-create-the-subscriber-node",children:"2. Create the Subscriber Node"}),"\n",(0,i.jsxs)(n.p,{children:["Create a new file named ",(0,i.jsx)(n.code,{children:"minimal_subscriber.py"})," in the same directory: ",(0,i.jsx)(n.code,{children:"~/ros2_ws/src/my_ros2_package/my_ros2_package/"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalSubscriber(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('minimal_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'topic',\r\n            self.listener_callback,\r\n            10)\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    minimal_subscriber = MinimalSubscriber()\r\n\r\n    rclpy.spin(minimal_subscriber)\r\n\r\n    # Destroy the node explicitly\r\n    # (optional - otherwise it will be done automatically\r\n    # when the garbage collector destroys the node object)\r\n    minimal_subscriber.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"3-update-setuppy",children:["3. Update ",(0,i.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,i.jsxs)(n.p,{children:["Modify ",(0,i.jsx)(n.code,{children:"~/ros2_ws/src/my_ros2_package/setup.py"})," to include the entry points for your new executables."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\r\n\r\npackage_name = 'my_ros2_package'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.0',\r\n    packages=find_packages(exclude=['test']),\r\n    data_files=[\r\n        ('share/' + package_name, ['package.xml']),\r\n        ('share/' + package_name + '/launch', ['launch/my_launch_file.launch.py']), # Example launch file\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='your_name',\r\n    maintainer_email='your_email@example.com',\r\n    description='TODO: Package description',\r\n    license='TODO: License declaration',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'minimal_publisher = my_ros2_package.minimal_publisher:main',\r\n            'minimal_subscriber = my_ros2_package.minimal_subscriber:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"4-build-and-run",children:"4. Build and Run"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Build your package"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select my_ros2_package\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Source the workspace"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run the publisher"}),": In one terminal:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_ros2_package minimal_publisher\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Run the subscriber"}),": In another terminal:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run my_ros2_package minimal_subscriber\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You should see the publisher sending messages and the subscriber receiving and printing them. Congratulations, you've created your first ROS 2 publisher and subscriber nodes!"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},3023(e,n,r){r.d(n,{R:()=>l,x:()=>t});var s=r(3696);const i={},a=s.createContext(i);function l(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(a.Provider,{value:n},e.children)}},4613(e){e.exports=JSON.parse('{"permalink":"/ur/blog/lab1-pub-sub","source":"@site/blog/lab1-pub-sub.md","title":"Lab: Creating a Simple Publisher/Subscriber","description":"This lab will guide you through creating your first ROS 2 nodes in Python. You will create two nodes: one that publishes a \\"hello world\\" message to a topic, and another that subscribes to that topic and prints the received messages.","date":"2025-12-06T17:43:40.000Z","tags":[],"readingTime":2.31,"hasTruncateMarker":false,"authors":[],"frontMatter":{"sidebar_position":3},"unlisted":false,"nextItem":{"title":"Welcome","permalink":"/ur/blog/welcome"}}')}}]);