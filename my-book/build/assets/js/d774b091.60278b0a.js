"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[2989],{8683(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"ros2-services-actions","title":"ROS 2 Services and Actions","description":"While ROS 2 topics are perfect for continuous data streams, there are many situations where a request-response or long-running task paradigm is more appropriate. For these scenarios, ROS 2 provides two powerful communication patterns: Services and Actions.","source":"@site/docs/07-ros2-services-actions.md","sourceDirName":".","slug":"/ros2-services-actions","permalink":"/docs/ros2-services-actions","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"A Guide to Humanoid Sensor Systems","permalink":"/docs/sensor-systems"},"next":{"title":"Building ROS 2 Packages with Python","permalink":"/docs/ros2-packages-python"}}');var r=s(2540),t=s(3023);const o={sidebar_position:7},c="ROS 2 Services and Actions",a={},l=[{value:"Services: Synchronous Request-Response",id:"services-synchronous-request-response",level:2},{value:"When to Use Services",id:"when-to-use-services",level:3},{value:"Actions: Asynchronous, Long-Running Tasks with Feedback",id:"actions-asynchronous-long-running-tasks-with-feedback",level:2},{value:"When to Use Actions",id:"when-to-use-actions",level:3},{value:"Topics vs. Services vs. Actions: A Summary",id:"topics-vs-services-vs-actions-a-summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-2-services-and-actions",children:"ROS 2 Services and Actions"})}),"\n",(0,r.jsxs)(n.p,{children:["While ROS 2 topics are perfect for continuous data streams, there are many situations where a request-response or long-running task paradigm is more appropriate. For these scenarios, ROS 2 provides two powerful communication patterns: ",(0,r.jsx)(n.strong,{children:"Services"})," and ",(0,r.jsx)(n.strong,{children:"Actions"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"services-synchronous-request-response",children:"Services: Synchronous Request-Response"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Service"})," is a synchronous communication pattern where one node (the client) sends a request to another node (the server) and waits for a response. This is analogous to calling a function in a traditional programming language."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Synchronous Nature"}),": The client blocks (waits) until the server has completed the request and sent back a response. This makes services ideal for quick, atomic tasks that must be completed before the client can proceed."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Service Definition"}),": Like messages, services have a defined type, specified in a ",(0,r.jsx)(n.code,{children:".srv"})," file. The file defines the structure of the request and the response, separated by ",(0,r.jsx)(n.code,{children:"---"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Example ",(0,r.jsx)(n.code,{children:".srv"})," Definition (",(0,r.jsx)(n.code,{children:"SetBool.srv"}),"):"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"bool data      # The request part\r\n---\r\nbool success   # The response part\r\nstring message\n"})}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-services",children:"When to Use Services"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Triggering an action"}),': Sending a command to a robot to switch to a specific mode (e.g., "enable safety stop").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Querying state"}),': Asking a node for a piece of information (e.g., "get current robot configuration").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performing a quick calculation"}),": Requesting a node to perform a calculation, like an inverse kinematics solution, and return the result."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"actions-asynchronous-long-running-tasks-with-feedback",children:"Actions: Asynchronous, Long-Running Tasks with Feedback"}),"\n",(0,r.jsxs)(n.p,{children:["An ",(0,r.jsx)(n.strong,{children:"Action"})," is used for long-running, asynchronous tasks that may take a significant amount of time to complete. Unlike services, actions provide feedback during their execution and are cancellable."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Asynchronous Nature"}),": When a client sends a goal to an action server, it does not block. The client can continue with other tasks while the action is executing."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Components of an Action"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Goal"}),': The client sends a goal to the action server (e.g., "navigate to coordinates X, Y").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Feedback"}),': The server provides regular updates on its progress towards the goal (e.g., "current distance to goal is 5 meters").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Result"}),': Once the task is complete, the server sends a final result (e.g., "succeeded in reaching goal").']}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Action Definition"}),": Actions are defined in ",(0,r.jsx)(n.code,{children:".action"})," files, which have three parts: the goal, the result, and the feedback, each separated by ",(0,r.jsx)(n.code,{children:"---"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Example ",(0,r.jsx)(n.code,{children:".action"})," Definition (",(0,r.jsx)(n.code,{children:"Navigate.action"}),"):"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# The goal\r\ngeometry_msgs/Point target_position\r\n---\r\n# The result\r\nbool success\r\n---\r\n# The feedback\r\nfloat32 distance_remaining\n"})}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-actions",children:"When to Use Actions"}),"\n",(0,r.jsx)(n.p,{children:"Actions are perfect for any task that is not instantaneous and where monitoring progress is important."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Navigation"}),": Commanding a mobile robot to move to a new location."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Manipulation"}),": Instructing a robot arm to pick up and place an object."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complex sequences"}),": Executing a multi-step assembly task."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"topics-vs-services-vs-actions-a-summary",children:"Topics vs. Services vs. Actions: A Summary"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Communication Type"}),(0,r.jsx)(n.th,{children:"Best For"}),(0,r.jsx)(n.th,{children:"Analogy"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Topics"})}),(0,r.jsx)(n.td,{children:"Continuous data streams (many-to-many)"}),(0,r.jsx)(n.td,{children:"Radio broadcast"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Services"})}),(0,r.jsx)(n.td,{children:"Quick, synchronous request-response (one-to-one)"}),(0,r.jsx)(n.td,{children:"Function call"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Actions"})}),(0,r.jsx)(n.td,{children:"Long-running, asynchronous tasks with feedback"}),(0,r.jsx)(n.td,{children:"Ordering food for delivery (you get updates)"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"By mastering topics, services, and actions, you will have a complete toolbox for orchestrating the complex behaviors of a humanoid robot, from processing real-time sensor data to executing high-level, goal-oriented tasks."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},3023(e,n,s){s.d(n,{R:()=>o,x:()=>c});var i=s(3696);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);