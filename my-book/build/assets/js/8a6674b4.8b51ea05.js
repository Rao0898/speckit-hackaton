"use strict";(globalThis.webpackChunkmy_book=globalThis.webpackChunkmy_book||[]).push([[7425],{9690(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"ros2-launch-files-parameters","title":"ROS 2 Launch Files and Parameter Management","description":"As your robotic systems grow in complexity, running each node in a separate terminal becomes tedious and unmanageable. ROS 2 provides a powerful launch system that allows you to start and configure multiple nodes at once from a single command. Additionally, the launch system provides a robust way to manage parameters, which are configurable settings for your nodes.","source":"@site/docs/09-ros2-launch-files-parameters.md","sourceDirName":".","slug":"/ros2-launch-files-parameters","permalink":"/my-book/docs/ros2-launch-files-parameters","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Building ROS 2 Packages with Python","permalink":"/my-book/docs/ros2-packages-python"},"next":{"title":"Setting Up the Gazebo Simulation Environment","permalink":"/my-book/docs/gazebo-setup"}}');var t=a(2540),s=a(3023);const i={sidebar_position:9},o="ROS 2 Launch Files and Parameter Management",l={},c=[{value:"What is a ROS 2 Launch File?",id:"what-is-a-ros-2-launch-file",level:2},{value:"Creating a Python Launch File",id:"creating-a-python-launch-file",level:2},{value:"Parameter Management",id:"parameter-management",level:2},{value:"Declaring Parameters in a Python Node",id:"declaring-parameters-in-a-python-node",level:3},{value:"Setting Parameters in a Launch File",id:"setting-parameters-in-a-launch-file",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ros-2-launch-files-and-parameter-management",children:"ROS 2 Launch Files and Parameter Management"})}),"\n",(0,t.jsxs)(n.p,{children:["As your robotic systems grow in complexity, running each node in a separate terminal becomes tedious and unmanageable. ROS 2 provides a powerful ",(0,t.jsx)(n.strong,{children:"launch system"})," that allows you to start and configure multiple nodes at once from a single command. Additionally, the launch system provides a robust way to manage ",(0,t.jsx)(n.strong,{children:"parameters"}),", which are configurable settings for your nodes."]}),"\n",(0,t.jsx)(n.h2,{id:"what-is-a-ros-2-launch-file",children:"What is a ROS 2 Launch File?"}),"\n",(0,t.jsx)(n.p,{children:"A launch file is a script (typically written in Python) that describes how to run a set of nodes. With a launch file, you can:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Start multiple nodes simultaneously."}),"\n",(0,t.jsx)(n.li,{children:"Automatically restart nodes if they crash."}),"\n",(0,t.jsx)(n.li,{children:"Remap topic, service, or action names."}),"\n",(0,t.jsx)(n.li,{children:"Set parameters for your nodes."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"creating-a-python-launch-file",children:"Creating a Python Launch File"}),"\n",(0,t.jsxs)(n.p,{children:["Launch files are usually placed in a ",(0,t.jsx)(n.code,{children:"launch"})," directory inside your ROS 2 package."]}),"\n",(0,t.jsx)(n.p,{children:"Here is an example of a simple Python launch file that starts two nodes: a talker and a listener."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"my_package/launch/my_launch_file.py"})})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_package',\r\n            executable='talker',\r\n            name='my_talker'\r\n        ),\r\n        Node(\r\n            package='my_package',\r\n            executable='listener',\r\n            name='my_listener'\r\n        ),\r\n    ])\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"generate_launch_description()"})}),": This is the main function that the ",(0,t.jsx)(n.code,{children:"ros2 launch"})," command looks for. It must return a ",(0,t.jsx)(n.code,{children:"LaunchDescription"})," object."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"LaunchDescription"})}),": This object is a container for all the entities (like nodes) you want to launch."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"Node"})}),": This action represents a single ROS 2 node. You specify the ",(0,t.jsx)(n.code,{children:"package"})," it belongs to, its ",(0,t.jsx)(n.code,{children:"executable"})," name (as defined in ",(0,t.jsx)(n.code,{children:"setup.py"}),"), and you can assign it a custom ",(0,t.jsx)(n.code,{children:"name"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To run this launch file, you would execute:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_package my_launch_file.py\n"})}),"\n",(0,t.jsx)(n.h2,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,t.jsx)(n.p,{children:"Parameters are a way to configure your nodes without changing their source code. You can think of them as settings that you can change at runtime or at launch time."}),"\n",(0,t.jsx)(n.h3,{id:"declaring-parameters-in-a-python-node",children:"Declaring Parameters in a Python Node"}),"\n",(0,t.jsx)(n.p,{children:"First, you must declare the parameters that your node accepts. This is typically done in the node's constructor."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class MyNode(Node):\r\n    def __init__(self):\r\n        super().__init__('my_parameter_node')\r\n        \r\n        # Declare a parameter named 'my_parameter' with a default value\r\n        self.declare_parameter('my_parameter', 'default_value')\r\n\r\n        # Get the parameter's value\r\n        my_param_value = self.get_parameter('my_parameter').get_parameter_value().string_value\r\n        self.get_logger().info(f'My parameter is: {my_param_value}')\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can declare parameters of different types, such as strings, integers, booleans, and floats."}),"\n",(0,t.jsx)(n.h3,{id:"setting-parameters-in-a-launch-file",children:"Setting Parameters in a Launch File"}),"\n",(0,t.jsx)(n.p,{children:"The most common way to set parameters is through your launch file. This allows you to manage all your node configurations in one place."}),"\n",(0,t.jsxs)(n.p,{children:["You can pass parameters to a ",(0,t.jsx)(n.code,{children:"Node"})," action using a YAML file."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"my_package/config/my_params.yaml"})})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'my_parameter_node:\r\n  ros__parameters:\r\n    my_parameter: "a_new_value_from_yaml"\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": The structure is ",(0,t.jsx)(n.code,{children:"node_name"})," -> ",(0,t.jsx)(n.code,{children:"ros__parameters"})," -> ",(0,t.jsx)(n.code,{children:"param_name: value"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Now, you can modify your launch file to load and pass this YAML file to the node."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"my_package/launch/my_param_launch.py"})})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Get the path to the package's share directory\r\n    pkg_share = get_package_share_directory('my_package')\r\n    # Get the path to the parameter file\r\n    param_file = os.path.join(pkg_share, 'config', 'my_params.yaml')\r\n\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_package',\r\n            executable='my_parameter_node',\r\n            name='my_parameter_node',\r\n            parameters=[param_file]  # Pass the parameter file\r\n        ),\r\n    ])\n"})}),"\n",(0,t.jsxs)(n.p,{children:["When you run this launch file, your node will start with ",(0,t.jsx)(n.code,{children:"my_parameter"})," set to ",(0,t.jsx)(n.code,{children:'"a_new_value_from_yaml"'})," instead of its default value."]}),"\n",(0,t.jsx)(n.p,{children:'Using launch files and parameters is essential for building complex, configurable, and reusable robotic applications. It separates your code (the "how") from your configuration (the "what"), which is a fundamental principle of good software engineering.'})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},3023(e,n,a){a.d(n,{R:()=>i,x:()=>o});var r=a(3696);const t={},s=r.createContext(t);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);